<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>osrsmath.apps.optimize.main API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML'></script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>osrsmath.apps.optimize.main</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import multiprocess
multiprocess.freeze_support()

from osrsmath.apps.optimize.gui_single import Ui_MainWindow
from pathlib import Path

from osrsmath.combat.player import Player, get_equipment_data
from osrsmath.combat.monsters import get_monster_data
from pprint import pprint as pp
from PySide2 import QtCore, QtGui, QtWidgets

import osrsmath.apps.GUI.resources
import textwrap
import osrsmath.config as config
import glob
import os

slots = [&#39;head&#39;, &#39;cape&#39;, &#39;neck&#39;, &#39;ammo&#39;, &#39;weapon&#39;, &#39;body&#39;, &#39;shield&#39;, &#39;legs&#39;, &#39;hands&#39;, &#39;feet&#39;, &#39;ring&#39;]

class GUI(Ui_MainWindow):
        OVERVIEW_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                This app allows you to determine the optimal equipment to wear against a set of opponents.

                There are three main panels:
                  1. Player (top left):
                      Enter levels, ignore equipment, and adjust requirements.

                  2. Monster (bottom left):
                      Lookup monsters, adjust there stats if desired.
                      Add them to the monster pool.

                  3. Optimize (right)
                      Find optimal equipment to fight the monster pool using your stats.
                      Allows potions, prayers, and equipment sets.
                      Note that the dropdowns are for potential future use.

                You can change the style and zoom in/out using the menubar.
                This helps people with different monitors/preferences.
                &#34;&#34;&#34;)

        SHORTCUTS_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                General:
                        Ctrl++ Zoom in
                        Ctrl+- Zoom out

                Monster Panel:
                        DoubleClick Edit Monster (use it in monster panel to customize)
                        Delete Delete selected monster from pool

                Optimize Panel:
                        Shift+Enter Evaluate current configuration

                        You can also add equipment to the ignore/adjust lists by
                        clicking on the dropdown item and using one of:
                                Shift+Click Add to ignore
                                Ctrl+Click Add to adjust

                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)


        PLAYER_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                1. Enter your combat stats.
                If additional skill levels are needed you will be asked.
                Username lookup to load your stats is not current implemented.

                2. Equipment listed in the Ignore tab won&#39;t be considered.
                Try running the evaluation first, then adding things you want to ignore.
                Lines starting with # are ignored (so you can use them as comments).
                You can use &#39;*&#39; as a wildcard. So &#34;*sword&#34; will ignore anything ending with sword.

                3. Equipment in the Adjust tab will use the given requirements.
                This overrides the database which may have errors, or you may want to impose your own restrictions (e.g. fire cape has no explicit requirements, so you may want to adjust that).
                However, you might find ignore to be much easier to use.
                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)

        MONSTER_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                Search for monsters.
                The number corresponds to their id.
                The database isn&#39;t perfect, so you can look up monsters on the wiki.
                If anything is off, adjust the stats.
                Give an optional name, and add it to the pool.

                You can filter to only show NMZ bosses.
                Due to database restrictions this is only crude.

                Adding a monster to the pool with the same name will override.
                Double clicking a monster in the pool will load it back into this panel.
                This allows you to adjust or view their stats.
                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)

        OPTIMIZE_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                1. Choose a skill to train (range &amp; mage unsupported now)

                2. Choose a potion, and what it boosts, and how you use it.
                Dose after means:
                        &#34;Take a dose after the [skill] *boost* drops below [a threshold]&#34;.
                        Useful for normal potion usage. Constant is better for overloads.

                3. Choose a prayer, and what it boosts.
                        level1,2,3 are the successive prayers.

                4. Choose what special sets to consider.
                        &lt;Dharok HP&gt; should be the average hp while dh&#39;ing.
                        Zero means don&#39;t consider dh.

                5. Evaluate. Optionally a histogram can be displayed showing the xp/h distribution.
                ===========================

                Each slot label will lookup the corresponding equipment on the wiki.
                Dropdowns are for future consideration.
                Kill information assumes 4xp/hit for all monsters (temporary).
                Kill information counts one kill as the entire pool.
                Offensive bonuses are shown, cost doesn&#39;t work.
                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)

        def setupUi(self, MainWindow):
                super().setupUi(MainWindow)
                self.load_defaults()
                self.monster_panel.add.clicked.connect(self.add_monster)
                self.optimize_panel.evaluate.clicked.connect(self.on_evaluate)
                self.optimize_panel.opponents.itemDoubleClicked.connect(
                        lambda item: self.monster_panel.fill_monster(item.text(), self.optimize_panel.data.monsters[item.text()])
                )

                self.actionOverview.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Overview&#39;, self.OVERVIEW_TEXT
                ).exec_())
                self.actionPlayer_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Player Panel&#39;, self.PLAYER_TEXT
                ).exec_())
                self.actionMonster_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Monster Panel&#39;, self.MONSTER_TEXT
                ).exec_())
                self.actionOptimize_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Optimize Panel&#39;, self.OPTIMIZE_TEXT
                ).exec_())
                self.actionShortcuts.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Shortcuts&#39;, self.SHORTCUTS_TEXT
                ).exec_())

                def update(do):
                        if do:
                                self.update_status(&#39;Updating Equipment...&#39;)  # These don&#39;t seem to work
                                get_equipment_data(force_update=True)
                                self.update_status(&#39;Updating Monsters...&#39;)
                                get_monster_data(force_update=True)
                                self.update_status(&#39;Finished Updating Database!&#39;)  # but this does.

                self.actionUpdate_Now.triggered.connect(lambda: update(QtWidgets.QMessageBox(QtWidgets.QMessageBox.Question,
                        &#39;Update Now&#39;, &#34;Would you like to download the latest equipment and monsters? You only need to do this &#34;
                        &#34;if you want to use those new entities. &#34;
                        &#34;If something is missing after updating, it is also possible that the osrsbox database has not yet been updated. &#34;
                        &#34;Try again on another day.&#34;,
                        QtWidgets.QMessageBox.Yes | QtWidgets.QMessageBox.No
                ).exec_() == QtWidgets.QMessageBox.Yes))

                self.optimize_panel.evaluate.setToolTip(&#34;Determine the optimal gear for your configuration.&#34;)
                self.optimize_panel.dharok.setToolTip(&#34;What&#39;s your average hp? 0 means don&#39;t consider dharok.&#34;)
                self.optimize_panel.obsidian.setToolTip(&#34;The obsidian armour set, along with the necklace.&#34;)

                shortcut = QtWidgets.QShortcut(QtGui.QKeySequence(&#34;Shift+Return&#34;), self.optimize_panel);
                shortcut.activated.connect(self.on_evaluate)

                def update_style(style_sheet_text=None):
                        if style_sheet_text is None:
                                style_sheet_text = self.MainWindow.styleSheet()
                        self.MainWindow.setStyleSheet(style_sheet_text + &#39;\n&#39; + f&#39;QWidget{{font-size: {self.fontsize}px;}}&#39;)

                def increase():
                        self.fontsize += 1
                        update_style()

                def decrease():
                        if self.fontsize &gt; 2:
                                self.fontsize -= 1
                        update_style()

                # Allow font size changes in menu
                self.fontsize = self.MainWindow.font().pointSize()
                self.actionIncrease_Size.setShortcut(&#34;Ctrl++&#34;)
                self.actionDecrease_Size.setShortcut(&#34;Ctrl+-&#34;)
                self.actionIncrease_Size.triggered.connect(increase)
                self.actionDecrease_Size.triggered.connect(decrease)

                # Load stylesheet options into menu
                for style_sheet in glob.glob(str(config.resource_path(&#34;apps/GUI/shared/stylesheets/*.?ss&#34;))):
                        option = os.path.basename(style_sheet).split(&#39;.&#39;)[0]  # Raw file name, no extension
                        name = f&#39;style_{option}&#39;
                        setattr(self, name, QtWidgets.QAction(self.MainWindow))
                        item = getattr(self, name)
                        item.setObjectName(name)
                        item.setText(option)
                        self.menuView.addAction(item)
                        item.triggered.connect(lambda _=None, style_sheet=style_sheet: update_style(open(style_sheet).read()))


                # Ctrl+click and shift+click equipment adds it to ignore/adjust panel respectively
                def modifier(slot):
                        mods = QtWidgets.QApplication.keyboardModifiers()
                        if mods == QtCore.Qt.ShiftModifier:
                                modify_text = self.ignore_adjust_panel.prepend_ignore
                        elif mods == QtCore.Qt.ControlModifier:
                                modify_text = self.ignore_adjust_panel.prepend_adjust
                        else:
                                return
                        modify_text(getattr(self.optimize_panel, slot).currentText())

                for slot in slots:
                        dropdown = getattr(self.optimize_panel, slot)
                        dropdown.activated.connect(lambda _=None, slot=slot: modifier(slot))

        def add_monster(self):
                name = self.monster_panel.custom_name.text()
                if name:
                        self.optimize_panel.add_monster(name, self.monster_panel.get_monster_as_dict())

        def update_status(self, message):
                self.MainWindow.statusBar().showMessage(message)

        def on_evaluate(self):
                from osrsmath.apps.optimize.logic.optimize import get_sets, get_best_set
                from osrsmath.combat.monsters import Monster
                from osrsmath.combat.boosts import BoostingSchemes, Prayers, Potions
                import time

                try:
                        self.optimize_panel.progressBar.setValue(0)
                        equipment_data = get_equipment_data()
                        monsters = {name: Monster(**m) for name, m in self.optimize_panel.data.monsters.items()}
                        if not monsters:
                                QtWidgets.QMessageBox(
                                        QtWidgets.QMessageBox.Warning, &#39;Invalid Number of Monsters&#39;, &#34;You haven&#39;t selected enough monsters.&#34;
                                ).exec_()
                                return

                        # Collect Input
                        training_skill = self.optimize_panel.get_training_skill()
                        special_sets = self.optimize_panel.get_selected_sets()
                        stats = self.player_panel.get_stats()
                        stats[&#39;current_health&#39;] = int(self.optimize_panel.entities[&#39;dharok&#39;].get())

                        ignore = self.ignore_adjust_panel.get_ignore()
                        adjust = self.ignore_adjust_panel.get_adjust()
                        potion = getattr(Potions, self.optimize_panel.potions.currentText())
                        potion_attributes = self.optimize_panel.potion_attributes.currentText()
                        prayer = getattr(Prayers, self.optimize_panel.prayers.currentText())
                        prayer_attributes = self.optimize_panel.prayer_attributes.currentText()
                        if potion != Potions.none and self.optimize_panel.boosting_scheme.currentText() == &#39;Dose After&#39;:
                                skill = self.optimize_panel.below_skill.currentText()
                                try:
                                        redose_level = int(self.optimize_panel.redose_level.text())
                                except ValueError:
                                        QtWidgets.QMessageBox(
                                                QtWidgets.QMessageBox.Warning, &#39;Invalid Boosting Input&#39;, &#34;You haven&#39;t provided a valid &#39;dose after&#39; level.&#34;
                                        ).exec_()
                                        return
                                boost = lambda p: BoostingSchemes(p, prayer, prayer_attributes).potion_when_skill_under(
                                        potion, skill, redose_level, potion_attributes
                                )
                        else:
                                boost = lambda p: BoostingSchemes(p, prayer, prayer_attributes).constant(potion, potion_attributes)

                        # Time and Evaluate Solution
                        t0 = time.time()
                        self.update_status(f&#39;Step (1/2). Generating Sets...&#39;)
                        sets = get_sets(training_skill, stats, monsters, ignore, adjust, equipment_data, special_sets, progress_callback=lambda i: self.optimize_panel.progressBar.setValue(int(i)))
                        t1 = time.time()
                        self.update_status(f&#39;Step (2/2). Evaluating {len(sets)} Sets...&#39;)
                        (s, xp, stance), xps = get_best_set(
                                stats,
                                training_skill,
                                boost,
                                monsters,
                                sets,
                                include_shared_xp=False,
                                progress_callback=lambda i: self.optimize_panel.progressBar.setValue(int(i)),
                                num_cores=int(self.optimize_panel.cpu_cores.text())
                        )
                        t2 = time.time()
                        self.update_status(&#39;Finished ...&#39;)
                        if s is None:
                                self.update_status(&#39;No results found.&#39;)
                                return

                        if self.optimize_panel.show_histogram.isChecked():
                                import matplotlib.pyplot as plt
                                plt.title(&#39;Xp/h Histogram&#39;)
                                plt.ylabel(&#39;Frequency&#39;)
                                plt.xlabel(&#39;Xp/h&#39;)
                                plt.hist(xps)
                                plt.show()


                        # Display Optimal Equipment
                        for slot in slots:
                                equipment_list = getattr(self.optimize_panel, slot)
                                equipment_list.clear()
                                if slot == &#39;weapon&#39;:
                                        equipment_list.addItem(s.get(&#39;weapon&#39;) if &#39;weapon&#39; in s else s.get(&#39;2h&#39;))
                                else:
                                        equipment_list.addItem(s.get(slot))

                        # Display Offensive Attributes
                        tab = self.optimize_panel.best_in_slot_bonuses
                        player = Player({})
                        for slot, item_name in s.items():
                                player.equip_by_name(item_name)
                        equipment_stats = player.get_stats()
                        for i, stat in enumerate([&#39;attack_stab&#39;, &#39;attack_slash&#39;, &#39;attack_crush&#39;, &#39;attack_ranged&#39;, &#39;attack_magic&#39;,
                                                                                &#39;melee_strength&#39;, &#39;ranged_strength&#39;, &#39;magic_damage&#39;, &#39;attack_speed&#39;]):
                                tab.setItem(i, 0, QtWidgets.QTableWidgetItem(str(round(equipment_stats[stat], 2))))
                        tab.setItem(9, 0, QtWidgets.QTableWidgetItem(str(&#34;&#34;)))

                        # Additional Messages
                        player = Player(stats)
                        player.combat_style = stance
                        [player.equip_by_name(e) for e in s.values()]
                        M = player.get_max_hit(potion, prayer)
                        print(M)

                        report = f&#34;Solved in {t2-t0:.2f}s ({t1-t0:.2f}s, {t2-t1:.2f}s) using {len(sets)} sets, giving {xp/1000:.2f}k xp/h.&#34;
                        print(report, stance)
                        self.update_status(report)

                        hit_rate = xp/4  # Assume 4xp per hit
                        total_hitpoints = sum(monster.levels[&#39;hitpoints&#39;] for name, monster in monsters.items())
                        kill_time = total_hitpoints / hit_rate
                        self.optimize_panel.xp_rate.setText(f&#34;{xp/1000:,.2f}k&#34;)
                        self.optimize_panel.attack_stance.setText(f&#34;{stance}&#34;)
                        self.optimize_panel.kill_time.setText(f&#34;{3600*kill_time:,.2f}s&#34;)
                        self.optimize_panel.kills_per_hour.setText(f&#34;{1/kill_time:,.2f}&#34;)
                except Exception as e:
                        import traceback
                        tb = traceback.format_exc()
                        print(e)
                        print(tb)
                        self.update_status(&#39;Error Encountered&#39;)
                        QtWidgets.QMessageBox(
                                QtWidgets.QMessageBox.Critical,
                                &#39;Error Encountered&#39;,
                                f&#34;{e}\n{tb}&#34;
                        ).exec_()

        def get_data_path(self, file):
                return config.resource_path(f&#34;apps/optimize/data/{file}&#34;)

        def load_defaults(self):
                self.player_panel.import_defaults(self.get_data_path(&#39;player.json&#39;))
                self.ignore_adjust_panel.import_defaults(self.get_data_path(&#39;ignore.json&#39;))
                self.optimize_panel.import_defaults(self.get_data_path(&#39;monsters.json&#39;))

                self.ignore_adjust_panel.set_text(self.ignore_adjust_panel.get_checked(&#39;data&#39;).get())

        def save_defaults(self):
                self.player_panel.export_defaults(self.get_data_path(&#39;player.json&#39;))
                self.ignore_adjust_panel.export_defaults(self.get_data_path(&#39;ignore.json&#39;))
                self.optimize_panel.export_defaults(self.get_data_path(&#39;monsters.json&#39;))



if __name__ == &#39;__main__&#39;:
        import multiprocess
        multiprocess.freeze_support()
        from osrsmath.apps.GUI.shared.application import run
        run(GUI)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="osrsmath.apps.optimize.main.GUI"><code class="flex name class">
<span>class <span class="ident">GUI</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GUI(Ui_MainWindow):
        OVERVIEW_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                This app allows you to determine the optimal equipment to wear against a set of opponents.

                There are three main panels:
                  1. Player (top left):
                      Enter levels, ignore equipment, and adjust requirements.

                  2. Monster (bottom left):
                      Lookup monsters, adjust there stats if desired.
                      Add them to the monster pool.

                  3. Optimize (right)
                      Find optimal equipment to fight the monster pool using your stats.
                      Allows potions, prayers, and equipment sets.
                      Note that the dropdowns are for potential future use.

                You can change the style and zoom in/out using the menubar.
                This helps people with different monitors/preferences.
                &#34;&#34;&#34;)

        SHORTCUTS_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                General:
                        Ctrl++ Zoom in
                        Ctrl+- Zoom out

                Monster Panel:
                        DoubleClick Edit Monster (use it in monster panel to customize)
                        Delete Delete selected monster from pool

                Optimize Panel:
                        Shift+Enter Evaluate current configuration

                        You can also add equipment to the ignore/adjust lists by
                        clicking on the dropdown item and using one of:
                                Shift+Click Add to ignore
                                Ctrl+Click Add to adjust

                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)


        PLAYER_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                1. Enter your combat stats.
                If additional skill levels are needed you will be asked.
                Username lookup to load your stats is not current implemented.

                2. Equipment listed in the Ignore tab won&#39;t be considered.
                Try running the evaluation first, then adding things you want to ignore.
                Lines starting with # are ignored (so you can use them as comments).
                You can use &#39;*&#39; as a wildcard. So &#34;*sword&#34; will ignore anything ending with sword.

                3. Equipment in the Adjust tab will use the given requirements.
                This overrides the database which may have errors, or you may want to impose your own restrictions (e.g. fire cape has no explicit requirements, so you may want to adjust that).
                However, you might find ignore to be much easier to use.
                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)

        MONSTER_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                Search for monsters.
                The number corresponds to their id.
                The database isn&#39;t perfect, so you can look up monsters on the wiki.
                If anything is off, adjust the stats.
                Give an optional name, and add it to the pool.

                You can filter to only show NMZ bosses.
                Due to database restrictions this is only crude.

                Adding a monster to the pool with the same name will override.
                Double clicking a monster in the pool will load it back into this panel.
                This allows you to adjust or view their stats.
                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)

        OPTIMIZE_TEXT = textwrap.dedent(&#34;&#34;&#34;\
                1. Choose a skill to train (range &amp; mage unsupported now)

                2. Choose a potion, and what it boosts, and how you use it.
                Dose after means:
                        &#34;Take a dose after the [skill] *boost* drops below [a threshold]&#34;.
                        Useful for normal potion usage. Constant is better for overloads.

                3. Choose a prayer, and what it boosts.
                        level1,2,3 are the successive prayers.

                4. Choose what special sets to consider.
                        &lt;Dharok HP&gt; should be the average hp while dh&#39;ing.
                        Zero means don&#39;t consider dh.

                5. Evaluate. Optionally a histogram can be displayed showing the xp/h distribution.
                ===========================

                Each slot label will lookup the corresponding equipment on the wiki.
                Dropdowns are for future consideration.
                Kill information assumes 4xp/hit for all monsters (temporary).
                Kill information counts one kill as the entire pool.
                Offensive bonuses are shown, cost doesn&#39;t work.
                &#34;&#34;&#34;).replace(&#39;\t&#39;, &#39; &#39;*6)

        def setupUi(self, MainWindow):
                super().setupUi(MainWindow)
                self.load_defaults()
                self.monster_panel.add.clicked.connect(self.add_monster)
                self.optimize_panel.evaluate.clicked.connect(self.on_evaluate)
                self.optimize_panel.opponents.itemDoubleClicked.connect(
                        lambda item: self.monster_panel.fill_monster(item.text(), self.optimize_panel.data.monsters[item.text()])
                )

                self.actionOverview.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Overview&#39;, self.OVERVIEW_TEXT
                ).exec_())
                self.actionPlayer_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Player Panel&#39;, self.PLAYER_TEXT
                ).exec_())
                self.actionMonster_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Monster Panel&#39;, self.MONSTER_TEXT
                ).exec_())
                self.actionOptimize_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Optimize Panel&#39;, self.OPTIMIZE_TEXT
                ).exec_())
                self.actionShortcuts.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                        &#39;Help - Shortcuts&#39;, self.SHORTCUTS_TEXT
                ).exec_())

                def update(do):
                        if do:
                                self.update_status(&#39;Updating Equipment...&#39;)  # These don&#39;t seem to work
                                get_equipment_data(force_update=True)
                                self.update_status(&#39;Updating Monsters...&#39;)
                                get_monster_data(force_update=True)
                                self.update_status(&#39;Finished Updating Database!&#39;)  # but this does.

                self.actionUpdate_Now.triggered.connect(lambda: update(QtWidgets.QMessageBox(QtWidgets.QMessageBox.Question,
                        &#39;Update Now&#39;, &#34;Would you like to download the latest equipment and monsters? You only need to do this &#34;
                        &#34;if you want to use those new entities. &#34;
                        &#34;If something is missing after updating, it is also possible that the osrsbox database has not yet been updated. &#34;
                        &#34;Try again on another day.&#34;,
                        QtWidgets.QMessageBox.Yes | QtWidgets.QMessageBox.No
                ).exec_() == QtWidgets.QMessageBox.Yes))

                self.optimize_panel.evaluate.setToolTip(&#34;Determine the optimal gear for your configuration.&#34;)
                self.optimize_panel.dharok.setToolTip(&#34;What&#39;s your average hp? 0 means don&#39;t consider dharok.&#34;)
                self.optimize_panel.obsidian.setToolTip(&#34;The obsidian armour set, along with the necklace.&#34;)

                shortcut = QtWidgets.QShortcut(QtGui.QKeySequence(&#34;Shift+Return&#34;), self.optimize_panel);
                shortcut.activated.connect(self.on_evaluate)

                def update_style(style_sheet_text=None):
                        if style_sheet_text is None:
                                style_sheet_text = self.MainWindow.styleSheet()
                        self.MainWindow.setStyleSheet(style_sheet_text + &#39;\n&#39; + f&#39;QWidget{{font-size: {self.fontsize}px;}}&#39;)

                def increase():
                        self.fontsize += 1
                        update_style()

                def decrease():
                        if self.fontsize &gt; 2:
                                self.fontsize -= 1
                        update_style()

                # Allow font size changes in menu
                self.fontsize = self.MainWindow.font().pointSize()
                self.actionIncrease_Size.setShortcut(&#34;Ctrl++&#34;)
                self.actionDecrease_Size.setShortcut(&#34;Ctrl+-&#34;)
                self.actionIncrease_Size.triggered.connect(increase)
                self.actionDecrease_Size.triggered.connect(decrease)

                # Load stylesheet options into menu
                for style_sheet in glob.glob(str(config.resource_path(&#34;apps/GUI/shared/stylesheets/*.?ss&#34;))):
                        option = os.path.basename(style_sheet).split(&#39;.&#39;)[0]  # Raw file name, no extension
                        name = f&#39;style_{option}&#39;
                        setattr(self, name, QtWidgets.QAction(self.MainWindow))
                        item = getattr(self, name)
                        item.setObjectName(name)
                        item.setText(option)
                        self.menuView.addAction(item)
                        item.triggered.connect(lambda _=None, style_sheet=style_sheet: update_style(open(style_sheet).read()))


                # Ctrl+click and shift+click equipment adds it to ignore/adjust panel respectively
                def modifier(slot):
                        mods = QtWidgets.QApplication.keyboardModifiers()
                        if mods == QtCore.Qt.ShiftModifier:
                                modify_text = self.ignore_adjust_panel.prepend_ignore
                        elif mods == QtCore.Qt.ControlModifier:
                                modify_text = self.ignore_adjust_panel.prepend_adjust
                        else:
                                return
                        modify_text(getattr(self.optimize_panel, slot).currentText())

                for slot in slots:
                        dropdown = getattr(self.optimize_panel, slot)
                        dropdown.activated.connect(lambda _=None, slot=slot: modifier(slot))

        def add_monster(self):
                name = self.monster_panel.custom_name.text()
                if name:
                        self.optimize_panel.add_monster(name, self.monster_panel.get_monster_as_dict())

        def update_status(self, message):
                self.MainWindow.statusBar().showMessage(message)

        def on_evaluate(self):
                from osrsmath.apps.optimize.logic.optimize import get_sets, get_best_set
                from osrsmath.combat.monsters import Monster
                from osrsmath.combat.boosts import BoostingSchemes, Prayers, Potions
                import time

                try:
                        self.optimize_panel.progressBar.setValue(0)
                        equipment_data = get_equipment_data()
                        monsters = {name: Monster(**m) for name, m in self.optimize_panel.data.monsters.items()}
                        if not monsters:
                                QtWidgets.QMessageBox(
                                        QtWidgets.QMessageBox.Warning, &#39;Invalid Number of Monsters&#39;, &#34;You haven&#39;t selected enough monsters.&#34;
                                ).exec_()
                                return

                        # Collect Input
                        training_skill = self.optimize_panel.get_training_skill()
                        special_sets = self.optimize_panel.get_selected_sets()
                        stats = self.player_panel.get_stats()
                        stats[&#39;current_health&#39;] = int(self.optimize_panel.entities[&#39;dharok&#39;].get())

                        ignore = self.ignore_adjust_panel.get_ignore()
                        adjust = self.ignore_adjust_panel.get_adjust()
                        potion = getattr(Potions, self.optimize_panel.potions.currentText())
                        potion_attributes = self.optimize_panel.potion_attributes.currentText()
                        prayer = getattr(Prayers, self.optimize_panel.prayers.currentText())
                        prayer_attributes = self.optimize_panel.prayer_attributes.currentText()
                        if potion != Potions.none and self.optimize_panel.boosting_scheme.currentText() == &#39;Dose After&#39;:
                                skill = self.optimize_panel.below_skill.currentText()
                                try:
                                        redose_level = int(self.optimize_panel.redose_level.text())
                                except ValueError:
                                        QtWidgets.QMessageBox(
                                                QtWidgets.QMessageBox.Warning, &#39;Invalid Boosting Input&#39;, &#34;You haven&#39;t provided a valid &#39;dose after&#39; level.&#34;
                                        ).exec_()
                                        return
                                boost = lambda p: BoostingSchemes(p, prayer, prayer_attributes).potion_when_skill_under(
                                        potion, skill, redose_level, potion_attributes
                                )
                        else:
                                boost = lambda p: BoostingSchemes(p, prayer, prayer_attributes).constant(potion, potion_attributes)

                        # Time and Evaluate Solution
                        t0 = time.time()
                        self.update_status(f&#39;Step (1/2). Generating Sets...&#39;)
                        sets = get_sets(training_skill, stats, monsters, ignore, adjust, equipment_data, special_sets, progress_callback=lambda i: self.optimize_panel.progressBar.setValue(int(i)))
                        t1 = time.time()
                        self.update_status(f&#39;Step (2/2). Evaluating {len(sets)} Sets...&#39;)
                        (s, xp, stance), xps = get_best_set(
                                stats,
                                training_skill,
                                boost,
                                monsters,
                                sets,
                                include_shared_xp=False,
                                progress_callback=lambda i: self.optimize_panel.progressBar.setValue(int(i)),
                                num_cores=int(self.optimize_panel.cpu_cores.text())
                        )
                        t2 = time.time()
                        self.update_status(&#39;Finished ...&#39;)
                        if s is None:
                                self.update_status(&#39;No results found.&#39;)
                                return

                        if self.optimize_panel.show_histogram.isChecked():
                                import matplotlib.pyplot as plt
                                plt.title(&#39;Xp/h Histogram&#39;)
                                plt.ylabel(&#39;Frequency&#39;)
                                plt.xlabel(&#39;Xp/h&#39;)
                                plt.hist(xps)
                                plt.show()


                        # Display Optimal Equipment
                        for slot in slots:
                                equipment_list = getattr(self.optimize_panel, slot)
                                equipment_list.clear()
                                if slot == &#39;weapon&#39;:
                                        equipment_list.addItem(s.get(&#39;weapon&#39;) if &#39;weapon&#39; in s else s.get(&#39;2h&#39;))
                                else:
                                        equipment_list.addItem(s.get(slot))

                        # Display Offensive Attributes
                        tab = self.optimize_panel.best_in_slot_bonuses
                        player = Player({})
                        for slot, item_name in s.items():
                                player.equip_by_name(item_name)
                        equipment_stats = player.get_stats()
                        for i, stat in enumerate([&#39;attack_stab&#39;, &#39;attack_slash&#39;, &#39;attack_crush&#39;, &#39;attack_ranged&#39;, &#39;attack_magic&#39;,
                                                                                &#39;melee_strength&#39;, &#39;ranged_strength&#39;, &#39;magic_damage&#39;, &#39;attack_speed&#39;]):
                                tab.setItem(i, 0, QtWidgets.QTableWidgetItem(str(round(equipment_stats[stat], 2))))
                        tab.setItem(9, 0, QtWidgets.QTableWidgetItem(str(&#34;&#34;)))

                        # Additional Messages
                        player = Player(stats)
                        player.combat_style = stance
                        [player.equip_by_name(e) for e in s.values()]
                        M = player.get_max_hit(potion, prayer)
                        print(M)

                        report = f&#34;Solved in {t2-t0:.2f}s ({t1-t0:.2f}s, {t2-t1:.2f}s) using {len(sets)} sets, giving {xp/1000:.2f}k xp/h.&#34;
                        print(report, stance)
                        self.update_status(report)

                        hit_rate = xp/4  # Assume 4xp per hit
                        total_hitpoints = sum(monster.levels[&#39;hitpoints&#39;] for name, monster in monsters.items())
                        kill_time = total_hitpoints / hit_rate
                        self.optimize_panel.xp_rate.setText(f&#34;{xp/1000:,.2f}k&#34;)
                        self.optimize_panel.attack_stance.setText(f&#34;{stance}&#34;)
                        self.optimize_panel.kill_time.setText(f&#34;{3600*kill_time:,.2f}s&#34;)
                        self.optimize_panel.kills_per_hour.setText(f&#34;{1/kill_time:,.2f}&#34;)
                except Exception as e:
                        import traceback
                        tb = traceback.format_exc()
                        print(e)
                        print(tb)
                        self.update_status(&#39;Error Encountered&#39;)
                        QtWidgets.QMessageBox(
                                QtWidgets.QMessageBox.Critical,
                                &#39;Error Encountered&#39;,
                                f&#34;{e}\n{tb}&#34;
                        ).exec_()

        def get_data_path(self, file):
                return config.resource_path(f&#34;apps/optimize/data/{file}&#34;)

        def load_defaults(self):
                self.player_panel.import_defaults(self.get_data_path(&#39;player.json&#39;))
                self.ignore_adjust_panel.import_defaults(self.get_data_path(&#39;ignore.json&#39;))
                self.optimize_panel.import_defaults(self.get_data_path(&#39;monsters.json&#39;))

                self.ignore_adjust_panel.set_text(self.ignore_adjust_panel.get_checked(&#39;data&#39;).get())

        def save_defaults(self):
                self.player_panel.export_defaults(self.get_data_path(&#39;player.json&#39;))
                self.ignore_adjust_panel.export_defaults(self.get_data_path(&#39;ignore.json&#39;))
                self.optimize_panel.export_defaults(self.get_data_path(&#39;monsters.json&#39;))</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="osrsmath.apps.optimize.gui_single.Ui_MainWindow" href="gui_single.html#osrsmath.apps.optimize.gui_single.Ui_MainWindow">Ui_MainWindow</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="osrsmath.apps.optimize.main.GUI.MONSTER_TEXT"><code class="name">var <span class="ident">MONSTER_TEXT</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.OPTIMIZE_TEXT"><code class="name">var <span class="ident">OPTIMIZE_TEXT</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.OVERVIEW_TEXT"><code class="name">var <span class="ident">OVERVIEW_TEXT</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.PLAYER_TEXT"><code class="name">var <span class="ident">PLAYER_TEXT</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.SHORTCUTS_TEXT"><code class="name">var <span class="ident">SHORTCUTS_TEXT</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="osrsmath.apps.optimize.main.GUI.add_monster"><code class="name flex">
<span>def <span class="ident">add_monster</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_monster(self):
        name = self.monster_panel.custom_name.text()
        if name:
                self.optimize_panel.add_monster(name, self.monster_panel.get_monster_as_dict())</code></pre>
</details>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.get_data_path"><code class="name flex">
<span>def <span class="ident">get_data_path</span></span>(<span>self, file)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_data_path(self, file):
        return config.resource_path(f&#34;apps/optimize/data/{file}&#34;)</code></pre>
</details>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.load_defaults"><code class="name flex">
<span>def <span class="ident">load_defaults</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load_defaults(self):
        self.player_panel.import_defaults(self.get_data_path(&#39;player.json&#39;))
        self.ignore_adjust_panel.import_defaults(self.get_data_path(&#39;ignore.json&#39;))
        self.optimize_panel.import_defaults(self.get_data_path(&#39;monsters.json&#39;))

        self.ignore_adjust_panel.set_text(self.ignore_adjust_panel.get_checked(&#39;data&#39;).get())</code></pre>
</details>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.on_evaluate"><code class="name flex">
<span>def <span class="ident">on_evaluate</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_evaluate(self):
        from osrsmath.apps.optimize.logic.optimize import get_sets, get_best_set
        from osrsmath.combat.monsters import Monster
        from osrsmath.combat.boosts import BoostingSchemes, Prayers, Potions
        import time

        try:
                self.optimize_panel.progressBar.setValue(0)
                equipment_data = get_equipment_data()
                monsters = {name: Monster(**m) for name, m in self.optimize_panel.data.monsters.items()}
                if not monsters:
                        QtWidgets.QMessageBox(
                                QtWidgets.QMessageBox.Warning, &#39;Invalid Number of Monsters&#39;, &#34;You haven&#39;t selected enough monsters.&#34;
                        ).exec_()
                        return

                # Collect Input
                training_skill = self.optimize_panel.get_training_skill()
                special_sets = self.optimize_panel.get_selected_sets()
                stats = self.player_panel.get_stats()
                stats[&#39;current_health&#39;] = int(self.optimize_panel.entities[&#39;dharok&#39;].get())

                ignore = self.ignore_adjust_panel.get_ignore()
                adjust = self.ignore_adjust_panel.get_adjust()
                potion = getattr(Potions, self.optimize_panel.potions.currentText())
                potion_attributes = self.optimize_panel.potion_attributes.currentText()
                prayer = getattr(Prayers, self.optimize_panel.prayers.currentText())
                prayer_attributes = self.optimize_panel.prayer_attributes.currentText()
                if potion != Potions.none and self.optimize_panel.boosting_scheme.currentText() == &#39;Dose After&#39;:
                        skill = self.optimize_panel.below_skill.currentText()
                        try:
                                redose_level = int(self.optimize_panel.redose_level.text())
                        except ValueError:
                                QtWidgets.QMessageBox(
                                        QtWidgets.QMessageBox.Warning, &#39;Invalid Boosting Input&#39;, &#34;You haven&#39;t provided a valid &#39;dose after&#39; level.&#34;
                                ).exec_()
                                return
                        boost = lambda p: BoostingSchemes(p, prayer, prayer_attributes).potion_when_skill_under(
                                potion, skill, redose_level, potion_attributes
                        )
                else:
                        boost = lambda p: BoostingSchemes(p, prayer, prayer_attributes).constant(potion, potion_attributes)

                # Time and Evaluate Solution
                t0 = time.time()
                self.update_status(f&#39;Step (1/2). Generating Sets...&#39;)
                sets = get_sets(training_skill, stats, monsters, ignore, adjust, equipment_data, special_sets, progress_callback=lambda i: self.optimize_panel.progressBar.setValue(int(i)))
                t1 = time.time()
                self.update_status(f&#39;Step (2/2). Evaluating {len(sets)} Sets...&#39;)
                (s, xp, stance), xps = get_best_set(
                        stats,
                        training_skill,
                        boost,
                        monsters,
                        sets,
                        include_shared_xp=False,
                        progress_callback=lambda i: self.optimize_panel.progressBar.setValue(int(i)),
                        num_cores=int(self.optimize_panel.cpu_cores.text())
                )
                t2 = time.time()
                self.update_status(&#39;Finished ...&#39;)
                if s is None:
                        self.update_status(&#39;No results found.&#39;)
                        return

                if self.optimize_panel.show_histogram.isChecked():
                        import matplotlib.pyplot as plt
                        plt.title(&#39;Xp/h Histogram&#39;)
                        plt.ylabel(&#39;Frequency&#39;)
                        plt.xlabel(&#39;Xp/h&#39;)
                        plt.hist(xps)
                        plt.show()


                # Display Optimal Equipment
                for slot in slots:
                        equipment_list = getattr(self.optimize_panel, slot)
                        equipment_list.clear()
                        if slot == &#39;weapon&#39;:
                                equipment_list.addItem(s.get(&#39;weapon&#39;) if &#39;weapon&#39; in s else s.get(&#39;2h&#39;))
                        else:
                                equipment_list.addItem(s.get(slot))

                # Display Offensive Attributes
                tab = self.optimize_panel.best_in_slot_bonuses
                player = Player({})
                for slot, item_name in s.items():
                        player.equip_by_name(item_name)
                equipment_stats = player.get_stats()
                for i, stat in enumerate([&#39;attack_stab&#39;, &#39;attack_slash&#39;, &#39;attack_crush&#39;, &#39;attack_ranged&#39;, &#39;attack_magic&#39;,
                                                                        &#39;melee_strength&#39;, &#39;ranged_strength&#39;, &#39;magic_damage&#39;, &#39;attack_speed&#39;]):
                        tab.setItem(i, 0, QtWidgets.QTableWidgetItem(str(round(equipment_stats[stat], 2))))
                tab.setItem(9, 0, QtWidgets.QTableWidgetItem(str(&#34;&#34;)))

                # Additional Messages
                player = Player(stats)
                player.combat_style = stance
                [player.equip_by_name(e) for e in s.values()]
                M = player.get_max_hit(potion, prayer)
                print(M)

                report = f&#34;Solved in {t2-t0:.2f}s ({t1-t0:.2f}s, {t2-t1:.2f}s) using {len(sets)} sets, giving {xp/1000:.2f}k xp/h.&#34;
                print(report, stance)
                self.update_status(report)

                hit_rate = xp/4  # Assume 4xp per hit
                total_hitpoints = sum(monster.levels[&#39;hitpoints&#39;] for name, monster in monsters.items())
                kill_time = total_hitpoints / hit_rate
                self.optimize_panel.xp_rate.setText(f&#34;{xp/1000:,.2f}k&#34;)
                self.optimize_panel.attack_stance.setText(f&#34;{stance}&#34;)
                self.optimize_panel.kill_time.setText(f&#34;{3600*kill_time:,.2f}s&#34;)
                self.optimize_panel.kills_per_hour.setText(f&#34;{1/kill_time:,.2f}&#34;)
        except Exception as e:
                import traceback
                tb = traceback.format_exc()
                print(e)
                print(tb)
                self.update_status(&#39;Error Encountered&#39;)
                QtWidgets.QMessageBox(
                        QtWidgets.QMessageBox.Critical,
                        &#39;Error Encountered&#39;,
                        f&#34;{e}\n{tb}&#34;
                ).exec_()</code></pre>
</details>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.save_defaults"><code class="name flex">
<span>def <span class="ident">save_defaults</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save_defaults(self):
        self.player_panel.export_defaults(self.get_data_path(&#39;player.json&#39;))
        self.ignore_adjust_panel.export_defaults(self.get_data_path(&#39;ignore.json&#39;))
        self.optimize_panel.export_defaults(self.get_data_path(&#39;monsters.json&#39;))</code></pre>
</details>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.setupUi"><code class="name flex">
<span>def <span class="ident">setupUi</span></span>(<span>self, MainWindow)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setupUi(self, MainWindow):
        super().setupUi(MainWindow)
        self.load_defaults()
        self.monster_panel.add.clicked.connect(self.add_monster)
        self.optimize_panel.evaluate.clicked.connect(self.on_evaluate)
        self.optimize_panel.opponents.itemDoubleClicked.connect(
                lambda item: self.monster_panel.fill_monster(item.text(), self.optimize_panel.data.monsters[item.text()])
        )

        self.actionOverview.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                &#39;Help - Overview&#39;, self.OVERVIEW_TEXT
        ).exec_())
        self.actionPlayer_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                &#39;Help - Player Panel&#39;, self.PLAYER_TEXT
        ).exec_())
        self.actionMonster_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                &#39;Help - Monster Panel&#39;, self.MONSTER_TEXT
        ).exec_())
        self.actionOptimize_Panel.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                &#39;Help - Optimize Panel&#39;, self.OPTIMIZE_TEXT
        ).exec_())
        self.actionShortcuts.triggered.connect(lambda: QtWidgets.QMessageBox(QtWidgets.QMessageBox.Information,
                &#39;Help - Shortcuts&#39;, self.SHORTCUTS_TEXT
        ).exec_())

        def update(do):
                if do:
                        self.update_status(&#39;Updating Equipment...&#39;)  # These don&#39;t seem to work
                        get_equipment_data(force_update=True)
                        self.update_status(&#39;Updating Monsters...&#39;)
                        get_monster_data(force_update=True)
                        self.update_status(&#39;Finished Updating Database!&#39;)  # but this does.

        self.actionUpdate_Now.triggered.connect(lambda: update(QtWidgets.QMessageBox(QtWidgets.QMessageBox.Question,
                &#39;Update Now&#39;, &#34;Would you like to download the latest equipment and monsters? You only need to do this &#34;
                &#34;if you want to use those new entities. &#34;
                &#34;If something is missing after updating, it is also possible that the osrsbox database has not yet been updated. &#34;
                &#34;Try again on another day.&#34;,
                QtWidgets.QMessageBox.Yes | QtWidgets.QMessageBox.No
        ).exec_() == QtWidgets.QMessageBox.Yes))

        self.optimize_panel.evaluate.setToolTip(&#34;Determine the optimal gear for your configuration.&#34;)
        self.optimize_panel.dharok.setToolTip(&#34;What&#39;s your average hp? 0 means don&#39;t consider dharok.&#34;)
        self.optimize_panel.obsidian.setToolTip(&#34;The obsidian armour set, along with the necklace.&#34;)

        shortcut = QtWidgets.QShortcut(QtGui.QKeySequence(&#34;Shift+Return&#34;), self.optimize_panel);
        shortcut.activated.connect(self.on_evaluate)

        def update_style(style_sheet_text=None):
                if style_sheet_text is None:
                        style_sheet_text = self.MainWindow.styleSheet()
                self.MainWindow.setStyleSheet(style_sheet_text + &#39;\n&#39; + f&#39;QWidget{{font-size: {self.fontsize}px;}}&#39;)

        def increase():
                self.fontsize += 1
                update_style()

        def decrease():
                if self.fontsize &gt; 2:
                        self.fontsize -= 1
                update_style()

        # Allow font size changes in menu
        self.fontsize = self.MainWindow.font().pointSize()
        self.actionIncrease_Size.setShortcut(&#34;Ctrl++&#34;)
        self.actionDecrease_Size.setShortcut(&#34;Ctrl+-&#34;)
        self.actionIncrease_Size.triggered.connect(increase)
        self.actionDecrease_Size.triggered.connect(decrease)

        # Load stylesheet options into menu
        for style_sheet in glob.glob(str(config.resource_path(&#34;apps/GUI/shared/stylesheets/*.?ss&#34;))):
                option = os.path.basename(style_sheet).split(&#39;.&#39;)[0]  # Raw file name, no extension
                name = f&#39;style_{option}&#39;
                setattr(self, name, QtWidgets.QAction(self.MainWindow))
                item = getattr(self, name)
                item.setObjectName(name)
                item.setText(option)
                self.menuView.addAction(item)
                item.triggered.connect(lambda _=None, style_sheet=style_sheet: update_style(open(style_sheet).read()))


        # Ctrl+click and shift+click equipment adds it to ignore/adjust panel respectively
        def modifier(slot):
                mods = QtWidgets.QApplication.keyboardModifiers()
                if mods == QtCore.Qt.ShiftModifier:
                        modify_text = self.ignore_adjust_panel.prepend_ignore
                elif mods == QtCore.Qt.ControlModifier:
                        modify_text = self.ignore_adjust_panel.prepend_adjust
                else:
                        return
                modify_text(getattr(self.optimize_panel, slot).currentText())

        for slot in slots:
                dropdown = getattr(self.optimize_panel, slot)
                dropdown.activated.connect(lambda _=None, slot=slot: modifier(slot))</code></pre>
</details>
</dd>
<dt id="osrsmath.apps.optimize.main.GUI.update_status"><code class="name flex">
<span>def <span class="ident">update_status</span></span>(<span>self, message)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_status(self, message):
        self.MainWindow.statusBar().showMessage(message)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="osrsmath.apps.optimize" href="index.html">osrsmath.apps.optimize</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="osrsmath.apps.optimize.main.GUI" href="#osrsmath.apps.optimize.main.GUI">GUI</a></code></h4>
<ul class="two-column">
<li><code><a title="osrsmath.apps.optimize.main.GUI.MONSTER_TEXT" href="#osrsmath.apps.optimize.main.GUI.MONSTER_TEXT">MONSTER_TEXT</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.OPTIMIZE_TEXT" href="#osrsmath.apps.optimize.main.GUI.OPTIMIZE_TEXT">OPTIMIZE_TEXT</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.OVERVIEW_TEXT" href="#osrsmath.apps.optimize.main.GUI.OVERVIEW_TEXT">OVERVIEW_TEXT</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.PLAYER_TEXT" href="#osrsmath.apps.optimize.main.GUI.PLAYER_TEXT">PLAYER_TEXT</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.SHORTCUTS_TEXT" href="#osrsmath.apps.optimize.main.GUI.SHORTCUTS_TEXT">SHORTCUTS_TEXT</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.add_monster" href="#osrsmath.apps.optimize.main.GUI.add_monster">add_monster</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.get_data_path" href="#osrsmath.apps.optimize.main.GUI.get_data_path">get_data_path</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.load_defaults" href="#osrsmath.apps.optimize.main.GUI.load_defaults">load_defaults</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.on_evaluate" href="#osrsmath.apps.optimize.main.GUI.on_evaluate">on_evaluate</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.save_defaults" href="#osrsmath.apps.optimize.main.GUI.save_defaults">save_defaults</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.setupUi" href="#osrsmath.apps.optimize.main.GUI.setupUi">setupUi</a></code></li>
<li><code><a title="osrsmath.apps.optimize.main.GUI.update_status" href="#osrsmath.apps.optimize.main.GUI.update_status">update_status</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>